# Лабораторная работа №5

## Создание простого калькулятора на `customtkinter`

**Цель работы**: Овладеть базовыми навыками работы с библиотекой `customtkinter` для создания графических интерфейсов на языке Python. Научиться создавать простое приложение калькулятора с использованием основных виджетов: текстовых полей, кнопок и выпадающего списка, а также обрабатывать события, связанные с взаимодействием пользователя.

## ТЕОРЕТИЧЕСКАЯ ЧАСТЬ

### Установка библиотеки `customtkinter`

Для работы с библиотекой необходимо установить её командой:

```shell
pip3 install customtkinter
```

### 1. Импорт библиотек

Импорт библиотеки `customtkinter` выполняется под сокращением `ctk`, что упрощает использование методов и виджетов.

```python
# Импорт библиотек
import customtkinter as ctk
```

#### Инициализация библиотеки и настройка темы

Перед созданием интерфейса настраивается тема и цветовая схема приложения:

```python
ctk.set_appearance_mode("Light")  # Установка светлой темы для всего приложения.
ctk.set_default_color_theme("green")  # Задает основную цветовую тему для виджетов.
```

#### Создание основного окна приложения

```python
root = ctk.CTk()  # Создание основного окна приложения с помощью customtkinter.
root.title("Простой калькулятор на customtkinter")  # Установка заголовка окна.
root.geometry("400x300")  # Задает размер окна — 400 пикселей по ширине и 300 пикселей по высоте.
```

#### Добавление виджетов

- Поля для ввода чисел: используются виджеты `entry1` и `entry2`, представляющие текстовые поля для ввода чисел. Они располагаются друг под другом с отступом в 10 пикселей.

```python
entry1 = ctk.CTkEntry(root, placeholder_text="Введите первое число")
entry1.pack(pady=10)  # Установка отступа сверху

entry2 = ctk.CTkEntry(root, placeholder_text="Введите второе число")
entry2.pack(pady=10)  # Установка отступа между текстовыми полями
```

- Выпадающий список: `operations_menu` — виджет с несколькими вариантами операций (сложение, вычитание, умножение, деление). При выборе нового значения запускается соответствующая функция, изменяющая текст на метке `label`.

```python
operation = ctk.StringVar(value="Сложение")  # Установка начального значения для выпадающего списка
operations_menu = ctk.CTkOptionMenu(root, values=["Сложение", "Вычитание", "Умножение", "Деление"], variable=operation)
operations_menu.pack(pady=10)  # Установка отступа
```

- Метка для отображения результата: `result_label` — виджет метки, используемый для отображения результата выполненной операции. Текст метки обновляется при каждом новом вычислении.

```python
result_label = ctk.CTkLabel(root, text="Результат появится здесь", font=("Arial", 16))
result_label.pack(pady=20)  # Установка отступа сверху и размера шрифта
```

- Кнопка для выполнения операции: `calculate_button` — виджет кнопки, запускающей выполнение математической операции между двумя введенными числами. При нажатии вызывается функция `calculate`.

```python
calculate_button = ctk.CTkButton(root, text="Выполнить операцию", command=calculate)
calculate_button.pack(pady=20)  # Установка отступа
```

#### Добавление функционала в приложение

Функция `calculate()` считывает значения из полей ввода и выполняет выбранную математическую операцию. В случае ошибки (например, ввода некорректных значений) или попытки деления на ноль, метка с результатом изменяет текст на сообщение об ошибке.

```python
# Добавление функции выполнения операции
def calculate():
    try:
        # Получение значений из полей ввода
        num1 = float(entry1.get())  # Считывание первого числа
        num2 = float(entry2.get())  # Считывание второго числа
        op = operation.get()  # Считывание выбранной операции

        # Выполнение выбранной операции
        if op == "Сложение":
            result = num1 + num2
        elif op == "Вычитание":
            result = num1 - num2
        elif op == "Умножение":
            result = num1 * num2
        elif op == "Деление":
            if num2 != 0:  # Проверка деления на ноль
                result = num1 / num2
            else:
                result = "Ошибка: деление на ноль"

        # Обновление текста метки с результатом
        result_label.configure(text=f"Результат: {result}")
    except ValueError:
        # Обработка ошибки некорректного ввода
        result_label.configure(text="Ошибка: введите корректные числа")
```

#### Запуск основного цикла приложения

`root.mainloop()` — основной цикл событий, который удерживает окно открытым и отслеживает действия пользователя. Это позволяет приложению оставаться активным и принимать ввод от пользователя.

```python
# Запуск основного цикла приложения
if __name__ == "__main__":
    root.mainloop()
```
